[gd_scene load_steps=9 format=3 uid="uid://c5icoj7eo4vaf"]

[ext_resource type="Script" path="res://scripts/state_checker.gd" id="1_47snb"]
[ext_resource type="Texture2D" uid="uid://dtb2357cbneo5" path="res://assets/level_2/sketch_level_2.png" id="2_cbatb"]
[ext_resource type="PackedScene" uid="uid://b81oqoehgfrkh" path="res://player_character.tscn" id="3_7vndf"]
[ext_resource type="Script" path="res://scripts/bubble_slot_manager.gd" id="4_vbdgx"]
[ext_resource type="Script" path="res://scripts/dialog_bubble.gd" id="5_ahv56"]
[ext_resource type="PackedScene" uid="uid://c80xvbx7tdgob" path="res://npc_character.tscn" id="6_kgvx7"]
[ext_resource type="Script" path="res://scripts/move_when.gd" id="7_cjsvw"]

[sub_resource type="Curve2D" id="Curve2D_fl1dp"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 4.78998, 8.98999, 0, 0, 0, 0, -159.21, 11.99)
}
point_count = 2

[node name="Level3" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_47snb")
level21 = {
NodePath("C1/BubbleSlot"): "PiratePiratesson"
}
level22 = {
NodePath("C2/BubbleSlot"): "Code",
NodePath("W2/BubbleSlot"): "MoneyHere"
}

[node name="SketchLevel1" type="Sprite2D" parent="."]
texture_filter = 1
position = Vector2(-100, 8)
scale = Vector2(0.35, 0.35)
texture = ExtResource("2_cbatb")
centered = false

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(595, 424)
scale = Vector2(0.35, 0.35)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(-2188.57, 1385.71, -2054.29, 1731.43, -1854.29, 1068.57, -1871.43, -1065.71, 1382.86, -1037.14, 1345.71, 1091.43, -1914.29, 1108.57, -1674.29, 1585.71, 1594.29, 1274.29, 1780, 754.286, 1868.57, -1351.43, -2302.86, -1268.57)

[node name="PlayerCharacter" parent="." instance=ExtResource("3_7vndf")]
position = Vector2(591, 738)
friction = 0.2

[node name="BubbleSlot" type="Node2D" parent="PlayerCharacter"]
position = Vector2(-3, -131)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="PlayerCharacter/BubbleSlot"]
script = ExtResource("5_ahv56")
lines = Array[String](["...", "...", "..."])
checkValue = ""

[node name="W2" parent="." instance=ExtResource("6_kgvx7")]
position = Vector2(113, 244)

[node name="BubbleSlot" type="Node2D" parent="W2"]
position = Vector2(122, -81)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="W2/BubbleSlot"]
script = ExtResource("5_ahv56")
lines = Array[String](["Here's your money.", "Here's your money.", "Here's your money."])
checkValue = "MoneyHere"

[node name="C2" parent="." instance=ExtResource("6_kgvx7")]
position = Vector2(116, 444)

[node name="BubbleSlot" type="Node2D" parent="C2"]
position = Vector2(-150, -150)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="C2/BubbleSlot"]
position = Vector2(11, 69)
script = ExtResource("5_ahv56")
lines = Array[String](["Vault number: 1234", "Vault number: 1234", "Vault number: 1234"])
checkValue = ""

[node name="W1" parent="." instance=ExtResource("6_kgvx7")]
position = Vector2(963, 678)

[node name="BubbleSlot" type="Node2D" parent="W1"]
position = Vector2(-150, -150)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="W1/BubbleSlot"]
script = ExtResource("5_ahv56")
lines = Array[String](["Vault number: 4321", "Vault number: 9999", "Vault number: 9999"])
checkValue = "Code"

[node name="C1" parent="." instance=ExtResource("6_kgvx7")]
position = Vector2(968, 510)

[node name="BubbleSlot" type="Node2D" parent="C1"]
position = Vector2(-150, -150)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="C1/BubbleSlot"]
script = ExtResource("5_ahv56")
lines = Array[String](["Norman Person", "Norman Person", "Norman Person"])
checkValue = ""

[node name="P1" parent="." instance=ExtResource("6_kgvx7")]
position = Vector2(866, 139)

[node name="BubbleSlot" type="Node2D" parent="P1"]
position = Vector2(-150, -150)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="P1/BubbleSlot"]
script = ExtResource("5_ahv56")
lines = Array[String](["Opening news", "Opening news", "Opening news"])
checkValue = "Open"

[node name="P2" parent="." instance=ExtResource("6_kgvx7")]
position = Vector2(1089, 151)

[node name="BubbleSlot" type="Node2D" parent="P2"]
position = Vector2(-150, -150)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="P2/BubbleSlot"]
script = ExtResource("5_ahv56")
lines = Array[String](["Pirate Piratesson", "Pirate Piratesson", "Pirate Piratesson"])
checkValue = "PiratePiratesson"

[node name="G1Path" type="Path2D" parent="."]
y_sort_enabled = true
position = Vector2(582, 486)
curve = SubResource("Curve2D_fl1dp")

[node name="PathFollow2D" type="PathFollow2D" parent="G1Path"]
position = Vector2(4.78998, 8.98999)
rotates = false
script = ExtResource("7_cjsvw")
move_when = "Open"

[node name="G1Keep" parent="G1Path/PathFollow2D" instance=ExtResource("6_kgvx7")]

[node name="BubbleSlot" type="Node2D" parent="G1Path/PathFollow2D/G1Keep"]
position = Vector2(150, -100)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="G1Path/PathFollow2D/G1Keep/BubbleSlot"]
position = Vector2(0, 1)
script = ExtResource("5_ahv56")
lines = Array[String](["...", "...", "..."])

[node name="G2Path" type="Path2D" parent="."]
y_sort_enabled = true
position = Vector2(580, 323)
curve = SubResource("Curve2D_fl1dp")

[node name="PathFollow2D" type="PathFollow2D" parent="G2Path"]
position = Vector2(4.78998, 8.98999)
rotates = false
script = ExtResource("7_cjsvw")
move_when = "Open"

[node name="TavernKeep" parent="G2Path/PathFollow2D" instance=ExtResource("6_kgvx7")]

[node name="BubbleSlot" type="Node2D" parent="G2Path/PathFollow2D/TavernKeep"]
position = Vector2(150, -100)
script = ExtResource("4_vbdgx")

[node name="Bubble" type="Node2D" parent="G2Path/PathFollow2D/TavernKeep/BubbleSlot"]
position = Vector2(0, 1)
script = ExtResource("5_ahv56")
lines = Array[String](["...", "...", "..."])
checkValue = "WantADrink"

[connection signal="advance_bubble" from="." to="PlayerCharacter/BubbleSlot" method="_on_level_2_advance_bubble"]
[connection signal="advance_bubble" from="." to="W2/BubbleSlot" method="_on_level_2_advance_bubble"]
[connection signal="advance_bubble" from="." to="C2/BubbleSlot" method="_on_level_2_advance_bubble"]
[connection signal="advance_bubble" from="." to="W1/BubbleSlot" method="_on_level_2_advance_bubble"]
[connection signal="advance_bubble" from="." to="C1/BubbleSlot" method="_on_level_2_advance_bubble"]
[connection signal="advance_bubble" from="." to="G1Path/PathFollow2D/G1Keep/BubbleSlot" method="_on_level_2_advance_bubble"]
[connection signal="advance_bubble" from="." to="G2Path/PathFollow2D/TavernKeep/BubbleSlot" method="_on_level_2_advance_bubble"]
[connection signal="on_slot_changed" from="PlayerCharacter/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="W2/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="C2/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="W1/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="C1/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="P1/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="P2/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="G1Path/PathFollow2D/G1Keep/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="G1Path/PathFollow2D/G1Keep/BubbleSlot" to="G1Path/PathFollow2D" method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="G2Path/PathFollow2D/TavernKeep/BubbleSlot" to="." method="_on_bubble_slot_on_slot_changed"]
[connection signal="on_slot_changed" from="G2Path/PathFollow2D/TavernKeep/BubbleSlot" to="G2Path/PathFollow2D" method="_on_bubble_slot_on_slot_changed"]
